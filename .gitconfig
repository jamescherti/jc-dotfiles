# Author: James Cherti
# URL: https://github.com/jamescherti/jc-dotfiles
#
# Description:
# ------------
# Git configuration (.gitconfig).
# Documentation: https://git-scm.com/docs/git-config
#
# License:
# --------
#
# Distributed under terms of the MIT license.
#
# Copyright (C) 2005-2025 James Cherti
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the “Software”), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
#

[tag]
# This setting forces all annotated tags to be GPG-signed when using
# 'git tag -a'.
forceSignAnnotated = true

[pack]
# Configures Git to auto-detect the number of CPUs and set the number of threads
# accordingly.
threads = 0

# Allocate up to 5GB as the amount of memory consumed by each thread in
# git-pack-objects for pack window memory when no limit is specified on the
# command line. This enhances Git’s efficiency for large repositories.
windowMemory = 5g

# The packSizeLimit configuration in Git determines the maximum size of a
# packfile that Git will generate. A packfile is a file that contains a
# collection of objects, such as commits, trees, and blobs, in a compressed
# format.
packSizeLimit = 2g

[gc]
# Automatically triggers garbage collection when the number of loose objects
# exceeds 8,000, optimizing repository storage and performance. When there are
# more than this number of loose objects in the repository, git gc --auto will
# pack them. Some porcelain commands use this to perform lightweight garbage
# collection periodically. The default value is 6,700.
auto = 8000

[core]
pager = less -X -F
quotepath = off
editor = vim

# trailing-space: look for spaces at the end of a line
# space-before-tab: look for spaces before tabs at beginning of line
# removed: indent-with-non-tab
whitespace = space-before-tab,trailing-space

# Prevent showing files whose names contain non-ASCII symbols as unversioned.
precomposeunicode = false

# Preloads the index into memory for improved performance when running Git
# commands like status and diff. Setting this to true will make Git load the
# index into memory early in the execution of commands. This can lead to
# performance improvements for operations that involve the index, especially in
# repositories with a large number of files..
preloadindex = true

[diff]
tool = vimdiff

# Diff algorithm for improved diff accuracy, especially in detecting moved code
# blocks.
algorithm = histogram

# Enable highlighting of moved lines in diffs. This helps identify blocks of
# code that have been moved within a file, making it easier to track code
# movement and understand refactoring changes.
# Values: no, default, plain, blocks, zebra, dimmed-zebra
# Details: `man git-diff`
colorMoved = plain

# Enable highlighting of moved whitespace in diffs. This setting makes it easier
# to spot changes where only whitespace (e.g., spaces or tabs) has been moved or
# modified, which is useful for identifying formatting changes without affecting
# the actual content of the code.
# Values: no, ignore-space-at-eol, ignore-space-change, ignore-all-space,
# allow-indentation-change
# Details: `man git-diff`
colorMovedWS = allow-indentation-change

[rerere]
# The "reuse recorded resolution" (rerere) feature, which helps Git
# automatically resolve merge conflicts by reusing previously recorded conflict
# resolutions. The setting enabled = 1 indicates that the rerere feature is
# enabled.
enabled = 1

# After a conflict is resolved manually, Git will automatically store the
# resolution in the rerere cache, making it available for future use.
autoUpdate = true

[commit]
# This includes the full commit diff in the text editor when composing the
# commit message, aiding in recalling the context and purpose of the changes.
verbose = true

[color]
ui = true
diff = always

[rebase]
# Create a stash of any local changes before starting a rebase. After the rebase
# is complete, the stash is reapplied.
autoStash = true

# If commits are removed or missing during a rebase, issue an error rather than
# silently ignoring them.
missingCommitsCheck = error

[merge]
# This setting enforce fast-forward merges, preventing unnecessary merge commits
# and maintaining a linear commit history.
ff = only

# Uses the 'zdiff3' conflict style for merges, which includes additional context
# by showing the base, local, and remote versions of conflicting changes in a
# more readable format, making it easier to resolve complex conflicts.
conflictStyle = zdiff3

# Before executing a merge, automatically stash all uncommitted changes in the
# working directory and index. This ensures the merge proceeds without
# interference from local modifications. Once the merge completes, the stashed
# changes are reapplied, restoring the developer's original working state.
autoStash = true

# Display a brief summary describing what was merged. This includes information
# such as the merged branch names and the number of commits.
summary = true

# Display a diffstat after the merge completes, which summarizes the changes
# made, showing how many lines were added and removed in each file.
diffstat = true

# Include up to 60 commit messages from the merged branch in the merge commit
# message. This provides historical context and helps reviewers understand the
# scope of the merge.
log = 60

[pull]
# This setting enforce fast-forward merges, preventing unnecessary merge commits
# and maintaining a linear commit history.
ff = only

[log]
# Display dates as YYYY-MM-DD
date = iso

# This configuration automatically pulls the current branch, which helps prevent
# "There is no tracking information for the current branch. Please specify which
# branch you want to merge with. See git-pull(1) for details. git pull <remote>
# <branch>"
default = current

[push]
# This configuration automatically pushes the current branch, which helps
# prevent the error: “fatal: The current branch BRANCH has no upstream branch.”
# When this setting is in place, Git will push the current branch to the remote,
# assuming the branch has an upstream set.
default = current

# This setting automatically sets up remote tracking for new branches,
# eliminating the need to manually run git branch --set-upstream-to after
# creating a new branch. It automates the process of linking local branches to
# their corresponding remote branches. This is particularly useful for users who
# frequently create new branches, as it reduces the need for repetitive
# configuration.
autoSetupRemote = true

# Push all annotated tags to the remote repository along with the branch
# updates. This ensures that tags created locally are also synchronized with the
# remote repository during a push operation.
followTags = true

[init]
# templatedir = ~/.git-templates
defaultBranch = main

[transfer]
# Verifies the integrity of all objects during data transfer operations like
# clone, helping detect corruption or tampering early.
fsckObjects = true

[fetch]
# Validates all objects during fetch to ensure no corrupted or malformed data is
# introduced into the local repository.
fsckObjects = true

# Automatically remove remote-tracking branches that no longer exist on the
# remote repository during a 'git fetch'. This helps keep the local repository
# clean by removing outdated references to remote branches that have been
# deleted.
prune = true

# Automatically delete remote tags in your local repository that have been #
# removed from the remote repository during a 'git fetch'. This ensures that #
# your local tags list is up-to-date and prevents the accumulation of tags that
# # no longer exist on the remote.
pruneTags = true

[receive]
# Verifies the integrity of all objects during data transfer operations like
# clone, helping detect corruption or tampering early.
fsckObjects = true

[branch]
# Configures `git branch` to sort branches by most recently used rather than
# alphabetically, making it easier to locate active branches.
sort = -committerdate

[tag]
# Sort tags by the date they were created.
sort = taggerdate

[help]
# When a mistyped Git command closely resembles a valid one, this setting
# prompts the user with a suggestion before executing the corrected command,
# preventing accidental execution of unintended commands.
autoCorrect = prompt

[alias]
# This alias simplifies the process of pulling changes by automatically stashing
# local changes, rebasing the current branch on top of the remote, and then
# reapplying the stashed changes, ensuring a clean and linear commit history.
up = pull --rebase --autostash

# Show details of the most recent commit or a specified object
s = show

# Commit all tracked changes
cia = commit -a

# Continue a rebase after resolving conflicts
rc = rebase --continue

# Amend the most recent commit with staged changes
amend = commit --amend

# Amend the most recent commit without changing the commit message
commend = commit --amend --no-edit

# Push commits to the remote repository
p = push

# Force push to the remote repository, overwriting history
pf = push --force

# Stage a specific file or files for commit
a = add

# Stage all changes (including deletions) in the working directory
aa = add -A

# Show a short summary of the working directory status
st = status -s

# Switch branches or restore working tree files
co = checkout

# List, create, or delete branches
b = branch

# Discard all local changes and reset to the latest commit on the current branch
rh = reset --hard HEAD

# Fetch and integrate changes from the remote repository
pl = pull

# Show changes in the working directory relative to the last commit
d = diff HEAD

# Show staged changes that will be included in the next commit
dc = diff --cached

# Launch the configured diff tool to view changes
dt = difftool

# Show word-by-word diff of the working directory against the last commit
dw = diff --color-words HEAD

# Show word-by-word details of the most recent commit
sw = show --color-words

# Display the commit history
l = log

# Display commit history in a compact and decorated format
ls = log --pretty=format:"%C(yellow)%h\\ %ad%Cred%d\\ %Creset%s%Cblue\\ [%cn]" --decorate --date=short

# Show commit history with GPG signature verification and file change summary
logs = log --show-signature --stat

# Show full commit history with diffs
lp = log -p

# Apply changes introduced by existing commits
chp = cherry-pick

# Abort an in-progress cherry-pick operation
chpa = cherry-pick --abort

# Continue an in-progress cherry-pick after resolving conflicts
chpc = cherry-pick --continue

# Quit an in-progress cherry-pick without committing
chpq = cherry-pick --quit

# Skip the current commit during an in-progress cherry-pick
chps = cherry-pick --skip
